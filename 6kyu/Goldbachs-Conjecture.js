/* ========== ========== ========== ========== ========== ==========*/
// https://www.codewars.com/kata/578dec07deaed9b17d0001b8/
/* ========== ========== ========== ========== ========== ==========*/
/*
Goldbach's Conjecture

Description:
German mathematician Christian Goldbach (1690-1764) conjectured that every even number greater than 2 can be represented by the sum of two prime numbers. For example, 10 can be represented as 3+7 or 5+5.

Your job is to make the function return a list containing all unique possible representations of n in an increasing order if n is an even integer; if n is odd, return an empty list. Hence, the first addend must always be less than or equal to the second to avoid duplicates.

Constraints : 3≤n≤320003 \le n \le 320003≤n≤32000
Examples

26  -->  ['3+23', '7+19', '13+13']

100 -->  ['3+97', '11+89', '17+83', '29+71', '41+59', '47+53']

7   -->  [] 

*/

// Solution
function goldbachPartitions(n) {
	if (n % 2 !== 0) return [];

	const isPrime = new Array(n + 1).fill(true);
	isPrime[0] = false;
	isPrime[1] = false;

	// generate all primes upto n, if i is not prime, set to false
	// Sieve of Eratosthenes Algorithm
	for (let i = 2; i * i <= n; i++) {
		if (isPrime[i]) {
			for (let j = i * i; j <= n; j += i) {
				isPrime[j] = false;
			}
		}
	}
	const results = [];
	for (let p = 2; p <= n / 2; p++) {
		if (isPrime[p]) {
			const q = n - p;
			if (isPrime[q]) {
				results.push(`${p}+${q}`);
			}
		}
	}
	return results;
}
// Test Codes
const assertSimilar = (a, b) => {
	let ok = false;
	if (a === b) ok = true;
	else if (Array.isArray(a) && Array.isArray(b) && a.length === b.length) {
		ok = a.every((e, i) => e === b[i]);
	}
	if (ok) console.log('Correct!');
	else console.log('Incorrect', a, b);
};

assertSimilar(goldbachPartitions(15), []);
assertSimilar(goldbachPartitions(101), []);
assertSimilar(goldbachPartitions(111), []);
assertSimilar(goldbachPartitions(393), []);
assertSimilar(goldbachPartitions(12133), []);

assertSimilar(goldbachPartitions(4), ['2+2']);
assertSimilar(goldbachPartitions(100), [
	'3+97',
	'11+89',
	'17+83',
	'29+71',
	'41+59',
	'47+53',
]);
assertSimilar(goldbachPartitions(594), [
	'7+587',
	'17+577',
	'23+571',
	'31+563',
	'37+557',
	'47+547',
	'53+541',
	'71+523',
	'73+521',
	'103+491',
	'107+487',
	'127+467',
	'131+463',
	'137+457',
	'151+443',
	'163+431',
	'173+421',
	'193+401',
	'197+397',
	'211+383',
	'227+367',
	'241+353',
	'257+337',
	'263+331',
	'277+317',
	'281+313',
	'283+311',
]);
assertSimilar(goldbachPartitions(1500), [
	'7+1493',
	'11+1489',
	'13+1487',
	'17+1483',
	'19+1481',
	'29+1471',
	'41+1459',
	'47+1453',
	'53+1447',
	'61+1439',
	'67+1433',
	'71+1429',
	'73+1427',
	'101+1399',
	'127+1373',
	'139+1361',
	'173+1327',
	'179+1321',
	'181+1319',
	'193+1307',
	'197+1303',
	'199+1301',
	'211+1289',
	'223+1277',
	'241+1259',
	'251+1249',
	'263+1237',
	'269+1231',
	'271+1229',
	'277+1223',
	'283+1217',
	'307+1193',
	'313+1187',
	'337+1163',
	'347+1153',
	'349+1151',
	'383+1117',
	'397+1103',
	'409+1091',
	'431+1069',
	'439+1061',
	'449+1051',
	'461+1039',
	'467+1033',
	'479+1021',
	'487+1013',
	'491+1009',
	'503+997',
	'509+991',
	'523+977',
	'547+953',
	'563+937',
	'571+929',
	'593+907',
	'613+887',
	'617+883',
	'619+881',
	'641+859',
	'643+857',
	'647+853',
	'661+839',
	'673+827',
	'677+823',
	'691+809',
	'727+773',
	'739+761',
	'743+757',
]);

assertSimilar(goldbachPartitions(7000), [
	'3+6997',
	'17+6983',
	'23+6977',
	'29+6971',
	'41+6959',
	'53+6947',
	'83+6917',
	'89+6911',
	'101+6899',
	'131+6869',
	'137+6863',
	'167+6833',
	'173+6827',
	'197+6803',
	'239+6761',
	'263+6737',
	'281+6719',
	'311+6689',
	'347+6653',
	'401+6599',
	'419+6581',
	'431+6569',
	'449+6551',
	'479+6521',
	'509+6491',
	'641+6359',
	'647+6353',
	'677+6323',
	'683+6317',
	'701+6299',
	'743+6257',
	'797+6203',
	'827+6173',
	'857+6143',
	'887+6113',
	'911+6089',
	'947+6053',
	'953+6047',
	'971+6029',
	'1013+5987',
	'1019+5981',
	'1061+5939',
	'1097+5903',
	'1103+5897',
	'1151+5849',
	'1187+5813',
	'1193+5807',
	'1217+5783',
	'1259+5741',
	'1283+5717',
	'1289+5711',
	'1307+5693',
	'1361+5639',
	'1409+5591',
	'1427+5573',
	'1481+5519',
	'1493+5507',
	'1499+5501',
	'1523+5477',
	'1559+5441',
	'1583+5417',
	'1601+5399',
	'1607+5393',
	'1613+5387',
	'1619+5381',
	'1667+5333',
	'1697+5303',
	'1721+5279',
	'1811+5189',
	'1847+5153',
	'1901+5099',
	'1913+5087',
	'1949+5051',
	'1979+5021',
	'1997+5003',
	'2027+4973',
	'2063+4937',
	'2069+4931',
	'2081+4919',
	'2111+4889',
	'2129+4871',
	'2207+4793',
	'2213+4787',
	'2267+4733',
	'2297+4703',
	'2309+4691',
	'2351+4649',
	'2357+4643',
	'2417+4583',
	'2477+4523',
	'2543+4457',
	'2549+4451',
	'2579+4421',
	'2591+4409',
	'2609+4391',
	'2663+4337',
	'2711+4289',
	'2729+4271',
	'2741+4259',
	'2789+4211',
	'2843+4157',
	'2861+4139',
	'2909+4091',
	'2927+4073',
	'2999+4001',
	'3011+3989',
	'3083+3917',
	'3089+3911',
	'3119+3881',
	'3137+3863',
	'3167+3833',
	'3203+3797',
	'3221+3779',
	'3299+3701',
	'3323+3677',
	'3329+3671',
	'3407+3593',
	'3461+3539',
	'3467+3533',
]);
